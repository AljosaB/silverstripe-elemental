!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s="./client/src/bundles/bundle.js")}({"./client/src/boot/index.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var o=n("./client/src/boot/registerComponents.js"),i=r(o),a=n("./client/src/boot/registerTransforms.js"),l=r(a);window.document.addEventListener("DOMContentLoaded",function(){(0,i.default)(),(0,l.default)()})},"./client/src/boot/registerComponents.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=r(o),a=n("./client/src/components/ElementEditor/Element.js"),l=r(a),s=n("./client/src/components/ElementEditor/ElementActions.js"),c=r(s),u=n("./client/src/components/ElementEditor/ElementEditor.js"),d=r(u),p=n("./client/src/components/ElementEditor/ElementList.js"),f=r(p),m=n("./client/src/components/ElementEditor/Toolbar.js"),y=r(m),b=n("./client/src/components/ElementEditor/AddNewButton.js"),h=r(b),g=n("./client/src/components/ElementEditor/Header.js"),v=r(g),E=n("./client/src/components/ElementEditor/Content.js"),T=r(E),_=n("./client/src/components/ElementEditor/Summary.js"),O=r(_),P=n("./client/src/components/ElementEditor/InlineEditForm.js"),j=r(P),I=n("./client/src/components/ElementEditor/AddElementPopover.js"),w=r(I),k=n("./client/src/components/ElementEditor/HoverBar.js"),D=r(k),A=n("./client/src/components/ElementEditor/DragPositionIndicator.js"),S=r(A),C=n("./client/src/components/TextCheckboxGroupField/TextCheckboxGroupField.js"),N=r(C);t.default=function(){i.default.component.registerMany({ElementEditor:d.default,ElementToolbar:y.default,ElementAddNewButton:h.default,ElementList:f.default,Element:l.default,ElementActions:c.default,ElementHeader:v.default,ElementContent:T.default,ElementSummary:O.default,ElementInlineEditForm:j.default,AddElementPopover:w.default,HoverBar:D.default,DragPositionIndicator:S.default,TextCheckboxGroupField:N.default})}},"./client/src/boot/registerTransforms.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=r(o),a=n("./client/src/state/history/readOneBlockQuery.js"),l=r(a),s=n("./client/src/components/HistoricElementView/HistoricElementView.js"),c=r(s),u=n("./client/src/state/history/revertToBlockVersionMutation.js"),d=r(u),p=n("./client/src/state/editor/readBlocksForPageQuery.js"),f=r(p),m=n("./client/src/state/editor/addElementMutation.js"),y=r(m),b=n("./client/src/components/ElementActions/ArchiveAction.js"),h=r(b),g=n("./client/src/components/ElementActions/PublishAction.js"),v=r(g),E=n("./client/src/components/ElementActions/SaveAction.js"),T=r(E),_=n("./client/src/components/ElementActions/UnpublishAction.js"),O=r(_);t.default=function(){i.default.transform("elemental-fieldgroup",function(e){e.component("FieldGroup.HistoryViewer.VersionDetail",c.default,"HistoricElement")},{after:"field-holders"}),i.default.transform("elements-history",function(e){e.component("HistoryViewer.Form_ItemEditForm",l.default,"ElementHistoryViewer")}),i.default.transform("blocks-history-revert",function(e){e.component("HistoryViewerToolbar.VersionedAdmin.HistoryViewer.Element.HistoryViewerVersionDetail",d.default,"BlockRevertMutation")}),i.default.transform("cms-element-editor",function(e){e.component("ElementList",f.default,"PageElements")}),i.default.transform("cms-element-adder",function(e){e.component("AddElementPopover",y.default,"ElementAddButton")}),i.default.transform("element-actions",function(e){e.component("ElementActions",T.default,"ElementActionsWithSave"),e.component("ElementActions",h.default,"ElementActionsWithArchive"),e.component("ElementActions",v.default,"ElementActionsWithPublish"),e.component("ElementActions",O.default,"ElementActionsWithUnpublish")})}},"./client/src/bundles/bundle.js":function(e,t,n){"use strict";n("./client/src/legacy/ElementEditor/entwine.js"),n("./client/src/boot/index.js")},"./client/src/components/ElementActions/AbstractAction.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(0),a=r(i),l=n(4),s=r(l),c=n(9),u=function(e){var t=e.className,n=e.title,r=o({className:(0,s.default)(t,"dropdown-item")},e);return a.default.createElement(c.DropdownItem,r,n)};u.propTypes={disabled:i.PropTypes.bool,className:i.PropTypes.string,onClick:i.PropTypes.func,title:i.PropTypes.string,name:i.PropTypes.string,active:i.PropTypes.bool},u.defaultProps={disabled:!1},t.default=u},"./client/src/components/ElementActions/ArchiveAction.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Component=void 0;var o=n(0),i=r(o),a=n(3),l=n("./client/src/components/ElementActions/AbstractAction.js"),s=r(l),c=n("./client/src/state/editor/archiveBlockMutation.js"),u=r(c),d=n(2),p=r(d),f=function(e){return function(t){var n=function(e){e.stopPropagation();var n=t.element.ID,r=t.isPublished,o=t.actions.handleArchiveBlock,i=p.default._t("ElementArchiveAction.CONFIRM_DELETE","Are you sure you want to send this block to the archive?");r&&(i=p.default._t("ElementArchiveAction.CONFIRM_DELETE_AND_UNPUBLISH","Warning: This block will be unpublished before being sent to the archive. Are you sure you want to proceed?")),o&&window.confirm(i)&&o(n).then(function(){var e=window.jQuery(".cms-preview");e.entwine("ss.preview")._loadUrl(e.find("iframe").attr("src"))})},r={title:p.default._t("ElementArchiveAction.ARCHIVE","Archive"),className:"element-editor__actions-archive",onClick:n,toggle:t.toggle};return i.default.createElement(e,t,t.children,i.default.createElement(s.default,r))}};t.Component=f,t.default=(0,a.compose)(u.default,f)},"./client/src/components/ElementActions/PublishAction.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n=(0,g.loadElementFormStateName)(t.element.ID),r=null;return e.form.formState.element&&e.form.formState.element[n]&&(r=e.form.formState.element[n].values),{formData:r,securityId:e.config.SecurityID,formDirty:e.unsavedForms.find(function(e){return e.name==="element."+n})}}Object.defineProperty(t,"__esModule",{value:!0}),t.Component=void 0;var i=n(0),a=r(i),l=n(3),s=n("./client/src/components/ElementActions/AbstractAction.js"),c=r(s),u=n("./client/src/state/editor/publishBlockMutation.js"),d=r(u),p=n(2),f=r(p),m=n(12),y=r(m),b=n(7),h=n("./client/src/state/editor/loadElementSchemaValue.js"),g=n("./client/src/state/editor/loadElementFormStateName.js"),v=function(e,t,n){var r=f.default.inject(f.default._t("ElementHeader.NOTITLE","Untitled {type} block"),{type:e}),o=f.default.inject(f.default._t("ElementPublishAction.SUCCESS_NOTIFICATION","Published '{title}' successfully"),{title:t||r}),i=f.default.inject(f.default._t("ElementPublishAction.ERROR_NOTIFICATION","Error publishing '{title}'"),{title:t||r});window.jQuery.noticeAdd({text:n?o:i,stay:!1,type:n?"success":"error"})},E=function(e,t,n){return y.default.createEndpointFetcher({url:(0,h.loadElementSchemaValue)("saveUrl",e),method:(0,h.loadElementSchemaValue)("saveMethod"),payloadFormat:(0,h.loadElementSchemaValue)("payloadFormat"),defaultData:{SecurityID:n}})(t).then(function(){return window.ss.apolloClient.queryManager.reFetchObservableQueries()}).then(function(e){var t=window.jQuery(".cms-preview");return t.entwine("ss.preview")._loadUrl(t.find("iframe").attr("src")),e}).then(function(t){var n=t[0]&&t[0].data.readOnePage.ElementalAreaIfExists.Elements.edges.find(function(t){return t.node.ID===e});return n&&n.node.Version})},T=function(e){return function(t){var n=t.element,r=t.formDirty,o=function(e){e.stopPropagation();var n=t.element,o=n.ID,i=n.Title,a=n.Version,l=n.BlockSchema.type,s=t.securityId,c=t.formData,u=t.actions.handlePublishBlock,d=new Promise(function(e){return e(a)});r&&(d=E(o,c,s)),d.then(function(e){return u(o,"DRAFT","LIVE",e)}).then(function(){return v(l,i,!0)}).catch(function(){return v(l,i,!1)})},i={title:f.default._t("ElementPublishAction.PUBLISH","Publish"),className:"element-editor__actions-publish",onClick:o,toggle:t.toggle};return a.default.createElement(e,t,t.children,(r||!n.IsLiveVersion)&&a.default.createElement(c.default,i))}};t.Component=T,t.default=(0,l.compose)(d.default,(0,b.connect)(o),T)},"./client/src/components/ElementActions/SaveAction.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n=(0,b.loadElementFormStateName)(t.element.ID),r=null;return e.form.formState.element&&e.form.formState.element[n]&&(r=e.form.formState.element[n].values),{formData:r,securityId:e.config.SecurityID}}Object.defineProperty(t,"__esModule",{value:!0}),t.Component=void 0;var i=n(0),a=r(i),l=n(3),s=n(7),c=n("./client/src/components/ElementActions/AbstractAction.js"),u=r(c),d=n(12),p=r(d),f=n(2),m=r(f),y=n("./client/src/state/editor/loadElementSchemaValue.js"),b=n("./client/src/state/editor/loadElementFormStateName.js"),h=function(e){return function(t){var n=function(e){e.stopPropagation();var n=t.element,r=t.securityId,o=t.formData,i=window,a=i.jQuery,l=m.default.inject(m.default._t("ElementHeader.NOTITLE","Untitled {type} block"),{type:n.BlockSchema.type}),s={url:(0,y.loadElementSchemaValue)("saveUrl",n.ID),method:(0,y.loadElementSchemaValue)("saveMethod"),payloadFormat:(0,y.loadElementSchemaValue)("payloadFormat"),defaultData:{SecurityID:r}};p.default.createEndpointFetcher(s)(o).then(function(){window.ss.apolloClient.queryManager.reFetchObservableQueries();var e=a(".cms-preview");e.entwine("ss.preview")._loadUrl(e.find("iframe").attr("src"));var t=o["PageElements_"+n.ID+"_Title"];a.noticeAdd({text:m.default.inject(m.default._t("ElementSaveAction.SUCCESS_NOTIFICATION","Saved '{title}' successfully"),{title:t||l}),stay:!1,type:"success"})}).catch(function(){a.noticeAdd({text:m.default.inject(m.default._t("ElementSaveAction.ERROR_NOTIFICATION","Error saving '{title}'"),{title:n.Title||l}),stay:!1,type:"error"})})},r={title:m.default._t("ElementSaveAction.SAVE","Save"),className:"element-editor__actions-save",onClick:n};return a.default.createElement(e,t,t.children,a.default.createElement(u.default,r))}};t.Component=h,t.default=(0,l.compose)((0,s.connect)(o),h)},"./client/src/components/ElementActions/UnpublishAction.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Component=void 0;var o=n(0),i=r(o),a=n(3),l=n("./client/src/components/ElementActions/AbstractAction.js"),s=r(l),c=n("./client/src/state/editor/unpublishBlockMutation.js"),u=r(c),d=n(2),p=r(d),f=function(e){return function(t){var n=t.element,r=t.actions.handleUnpublishBlock,o=function(e){e.stopPropagation();var t=window,o=t.jQuery,i=p.default.inject(p.default._t("ElementHeader.NOTITLE","Untitled {type} block"),{type:n.BlockSchema.type});r&&r(n.ID).then(function(){var e=o(".cms-preview");e.entwine("ss.preview")._loadUrl(e.find("iframe").attr("src")),o.noticeAdd({text:p.default.inject(p.default._t("ElementUnpublishAction.SUCCESS_NOTIFICATION","Removed '{title}' from the published page"),{title:n.Title||i}),stay:!1,type:"success"})}).catch(function(){o.noticeAdd({text:p.default.inject(p.default._t("ElementUnpublishAction.ERROR_NOTIFICATION","Error unpublishing '{title}'"),{title:n.Title||i}),stay:!1,type:"error"})})},a={title:p.default._t("ElementUnpublishAction.UNPUBLISH","Unpublish"),className:"element-editor__actions-unpublish",onClick:o,toggle:t.toggle};return i.default.createElement(e,t,t.children,n.IsPublished&&i.default.createElement(s.default,a))}};t.Component=f,t.default=(0,a.compose)(u.default,f)},"./client/src/components/ElementEditor/AddElementPopover.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(0),c=r(s),u=n(4),d=r(u),p=n(1),f=n("./client/src/types/elementTypeType.js"),m=n(2),y=r(m),b=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleToggle=n.handleToggle.bind(n),n}return a(t,e),l(t,[{key:"getElementButtonClickHandler",value:function(e){var t=this;return function(n){var r=t.props,o=r.actions.handleAddElementToArea,i=r.elementalAreaId,a=r.insertAfterElement;n.preventDefault(),o(e.class,i,a).then(function(){var e=window.jQuery(".cms-preview");e.entwine("ss.preview")._loadUrl(e.find("iframe").attr("src"))}),t.handleToggle()}}},{key:"handleKeyDown",value:function(e){switch(e.key){case"Escape":this.handleToggle()}}},{key:"handleToggle",value:function(){(0,this.props.toggle)()}},{key:"render",value:function(){var e=this,t=this.props,n=t.PopoverOptionSetComponent,r=t.elementTypes,o=t.container,i=t.extraClass,a=t.isOpen,l=t.placement,s=t.target,u=(0,d.default)("element-editor-add-element",i),p=r.map(function(t){return{content:t.title,key:t.name,className:(0,d.default)(t.icon,"btn--icon-xl","element-editor-add-element__button"),onClick:e.getElementButtonClickHandler(t)}});return c.default.createElement(n,{buttons:p,searchPlaceholder:y.default._t("ElementAddElementPopover.SEARCH_BLOCKS","Search blocks"),extraClass:u,container:o,isOpen:a,placement:l,target:s,toggle:this.handleToggle})}}]),t}(s.Component);b.propTypes={container:s.PropTypes.oneOfType([s.PropTypes.string,s.PropTypes.func,s.PropTypes.object]),elementTypes:s.PropTypes.arrayOf(f.elementTypeType).isRequired,extraClass:s.PropTypes.oneOfType([s.PropTypes.string,s.PropTypes.array,s.PropTypes.object]),isOpen:s.PropTypes.bool.isRequired,placement:s.PropTypes.string,target:s.PropTypes.oneOfType([s.PropTypes.string,s.PropTypes.func,s.PropTypes.object]).isRequired,toggle:s.PropTypes.func.isRequired,elementalAreaId:s.PropTypes.number.isRequired,insertAfterElement:s.PropTypes.oneOfType([s.PropTypes.number,s.PropTypes.string])},t.default=(0,p.inject)(["PopoverOptionSet"],function(e){return{PopoverOptionSetComponent:e}},function(){return"ElementEditor"})(b)},"./client/src/components/ElementEditor/AddNewButton.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Component=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(0),c=r(s),u=n(9),d=n(2),p=r(d),f=n("./client/src/types/elementTypeType.js"),m=n(1),y=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.toggle=n.toggle.bind(n),n.state={popoverOpen:!1},n}return a(t,e),l(t,[{key:"toggle",value:function(){this.setState({popoverOpen:!this.state.popoverOpen})}},{key:"render",value:function(){var e=this.props,t=e.AddElementPopoverComponent,n=e.elementTypes,r=e.elementalAreaId,o={id:"ElementalArea"+r+"_AddButton",color:"primary",onClick:this.toggle,className:"font-icon-plus"};return c.default.createElement("div",null,c.default.createElement(u.Button,o,p.default._t("ElementAddNewButton.ADD_BLOCK","Add block")),c.default.createElement(t,{placement:"bottom-start",target:o.id,isOpen:this.state.popoverOpen,elementTypes:n,toggle:this.toggle,elementalAreaId:r,insertAfterElement:0}))}}]),t}(s.Component);y.defaultProps={},y.propTypes={elementTypes:s.PropTypes.arrayOf(f.elementTypeType).isRequired,elementalAreaId:s.PropTypes.number.isRequired},t.Component=y,t.default=(0,m.inject)(["AddElementPopover"],function(e){return{AddElementPopoverComponent:e}},function(){return"ElementEditor.ElementList.AddNewButton"})(y)},"./client/src/components/ElementEditor/Content.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t){var n=(0,m.loadElementFormStateName)(t.id);return{formDirty:(0,y.isDirty)("element."+n,h.default)(e)}}Object.defineProperty(t,"__esModule",{value:!0}),t.Component=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),u=r(c),d=n(1),p=n(3),f=n(7),m=n("./client/src/state/editor/loadElementFormStateName.js"),y=n(11),b=n(14),h=r(b),g=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"render",value:function(){var e=this.props,t=e.id,n=e.fileUrl,r=e.fileTitle,o=e.content,i=e.previewExpanded,a=e.InlineEditFormComponent,l=e.SummaryComponent,s=e.activeTab,c=e.onFormInit,d=e.handleLoadingError,p=e.formDirty;return u.default.createElement("div",{className:"element-editor-content"},!i&&u.default.createElement(l,{content:o,fileUrl:n,fileTitle:r}),i&&u.default.createElement(a,{extraClass:{"element-editor-editform--collapsed":!i},onClick:function(e){return e.stopPropagation()},elementId:t,activeTab:s,onFormInit:c,handleLoadingError:d}),p&&u.default.createElement("input",{type:"hidden",name:"change-tracker",className:"element-form-dirty-state",value:"1"}))}}]),t}(c.PureComponent);g.propTypes={id:c.PropTypes.string,content:c.PropTypes.string,fileUrl:c.PropTypes.string,fileTitle:c.PropTypes.string,previewExpanded:c.PropTypes.bool,SummaryComponent:c.PropTypes.oneOfType([c.PropTypes.node,c.PropTypes.func]),InlineEditFormComponent:c.PropTypes.oneOfType([c.PropTypes.node,c.PropTypes.func]),handleLoadingError:c.PropTypes.func},g.defaultProps={},t.Component=g,t.default=(0,p.compose)((0,d.inject)(["ElementSummary","ElementInlineEditForm"],function(e,t){return{SummaryComponent:e,InlineEditFormComponent:t}},function(){return"ElementEditor.ElementList.Element"}),(0,f.connect)(l))(g)},"./client/src/components/ElementEditor/DragPositionIndicator.js":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),s=function(e){return e&&e.__esModule?e:{default:e}}(l),c=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),a(t,[{key:"render",value:function(){return s.default.createElement("div",{className:"elemental-editor-drag-indicator"},s.default.createElement("div",{className:"elemental-editor-drag-indicator__ball"}))}}]),t}(l.PureComponent);t.default=c},"./client/src/components/ElementEditor/Element.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t){var n=t.element.ID,r=(0,T.loadElementFormStateName)(n),o=(0,_.loadElementSchemaValue)("schemaUrl",n),i=function(e){return"Tabs"===e.component},a=e.form&&e.form.formSchemas[o]&&e.form.formSchemas[o].schema&&e.form.formSchemas[o].schema.fields.find(i),l=a&&a.id,s="element."+r+"__"+l;return{tabSetName:l,activeTab:e.tabs&&e.tabs.fields&&e.tabs.fields[s]&&e.tabs.fields[s].activeTab}}function s(e,t){var n=(0,T.loadElementFormStateName)(t.element.ID);return{onActivateTab:function(t,r){e(P.activateTab("element."+n+"__"+t,r))}}}Object.defineProperty(t,"__esModule",{value:!0}),t.Component=void 0;var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),d=r(u),p=n("./client/src/types/elementType.js"),f=n("./client/src/types/elementTypeType.js"),m=n(3),y=n(1),b=n(2),h=r(b),g=n(4),v=r(g),E=n(7),T=n("./client/src/state/editor/loadElementFormStateName.js"),_=n("./client/src/state/editor/loadElementSchemaValue.js"),O=n(18),P=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(O),j=n(8),I=n(17),w=n("./client/src/lib/dragHelpers.js"),k=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleKeyUp=n.handleKeyUp.bind(n),n.handleExpand=n.handleExpand.bind(n),n.handleLoadingError=n.handleLoadingError.bind(n),n.handleTabClick=n.handleTabClick.bind(n),n.updateFormTab=n.updateFormTab.bind(n),n.state={previewExpanded:!1,initialTab:"",loadingError:!1},n}return a(t,e),c(t,[{key:"componentDidMount",value:function(){var e=this.props.connectDragPreview;e&&e((0,I.getEmptyImage)(),{captureDraggingState:!0})}},{key:"getVersionedStateClassName",value:function(){var e=this.props.element;return e.IsPublished?e.IsPublished&&!e.IsLiveVersion?"element-editor__element--modified":"element-editor__element--published":"element-editor__element--draft"}},{key:"handleLoadingError",value:function(){this.setState({loadingError:!0})}},{key:"updateFormTab",value:function(e){var t=this.props,n=t.tabSetName,r=t.onActivateTab,o=this.state.initialTab;o||this.setState({initialTab:e}),e||o?r(n,e||o):r(n,"Main")}},{key:"handleTabClick",value:function(e){var t=this.props.activeTab,n=this.state.loadingError;e===t||n||(this.setState({previewExpanded:!0}),this.updateFormTab(e))}},{key:"handleExpand",value:function(e){var t=this.props,n=t.type,r=t.link,o=this.state.loadingError;return"button"===e.target.type?void e.stopPropagation():n.inlineEditable&&!o?void this.setState({previewExpanded:!this.state.previewExpanded}):void(window.location=r)}},{key:"handleKeyUp",value:function(e){var t=e.target.nodeName;"Enter"===e.code?this.handleExpand(e):"Space"!==e.code||["input","textarea"].includes(t.toLowerCase())||this.handleExpand(e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.element,r=t.type,o=t.HeaderComponent,i=t.ContentComponent,a=t.link,l=t.activeTab,s=t.connectDragSource,c=t.connectDropTarget,u=t.isDragging,p=t.isOver,f=this.state.previewExpanded,m=h.default.inject(h.default._t("ElementalElement.TITLE","Edit this {type} block"),{type:r.title});if(!n.ID)return null;var y=(0,v.default)("element-editor__element",{"element-editor__element--expandable":r.inlineEditable,"element-editor__element--dragging":u,"element-editor__element--dragged-over":p},this.getVersionedStateClassName());return c(s(d.default.createElement("div",{className:y,onClick:this.handleExpand,onKeyUp:this.handleKeyUp,role:"button",tabIndex:0,title:m,key:n.ID},d.default.createElement(o,{element:n,type:r,expandable:r.inlineEditable,link:a,previewExpanded:f,handleEditTabsClick:this.handleTabClick,activeTab:l,disableTooltip:u}),d.default.createElement(i,{id:n.ID,fileUrl:n.BlockSchema.fileURL,fileTitle:n.BlockSchema.fileTitle,content:n.BlockSchema.content,previewExpanded:f&&!u,activeTab:l,onFormInit:function(){return e.updateFormTab(l)},handleLoadingError:this.handleLoadingError}))))}}]),t}(u.Component);k.propTypes={element:p.elementType,type:f.elementTypeType.isRequired,link:u.PropTypes.string.isRequired,activeTab:u.PropTypes.string,tabSetName:u.PropTypes.string,onActivateTab:u.PropTypes.func,connectDragSource:u.PropTypes.func.isRequired,connectDragPreview:u.PropTypes.func.isRequired,connectDropTarget:u.PropTypes.func.isRequired,isDragging:u.PropTypes.bool.isRequired,isOver:u.PropTypes.bool.isRequired,onDragOver:u.PropTypes.func,onDragEnd:u.PropTypes.func,onDragStart:u.PropTypes.func},k.defaultProps={element:null},t.Component=k;var D={beginDrag:function(e){return e.element},endDrag:function(e,t){var n=e.onDragEnd;n&&t.getDropResult()&&n(t.getItem().ID,t.getDropResult().dropAfterID)}},A={drop:function(e,t,n){return{target:e.element.ID,dropSpot:(0,w.isOverTop)(t,n)?"top":"bottom"}},hover:function(e,t,n){var r=e.element,o=e.onDragOver;o&&o(r,(0,w.isOverTop)(t,n))}};t.default=(0,m.compose)((0,j.DropTarget)("element",A,function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver()}}),(0,j.DragSource)("element",D,function(e,t){return{connectDragSource:e.dragSource(),connectDragPreview:e.dragPreview(),isDragging:t.isDragging()}}),(0,E.connect)(l,s),(0,y.inject)(["ElementHeader","ElementContent"],function(e,t){return{HeaderComponent:e,ContentComponent:t}},function(){return"ElementEditor.ElementList.Element"}))(k)},"./client/src/components/ElementEditor/ElementActions.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Component=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(0),c=r(s),u=n(3),d=n(9),p=n(1),f=n("./client/src/types/elementType.js"),m=n("./client/src/components/ElementActions/AbstractAction.js"),y=r(m),b=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleEditTabsClick=n.handleEditTabsClick.bind(n),n}return a(t,e),l(t,[{key:"handleEditTabsClick",value:function(e){(0,this.props.handleEditTabsClick)(e.target.name)}},{key:"renderEditTabs",value:function(){var e=this,t=this.props,n=t.editTabs,r=t.activeTab;return n&&n.length?n.map(function(t){var n=t.name,o=t.title;return c.default.createElement(y.default,{key:n,name:n,title:o,onClick:e.handleEditTabsClick,active:n===r})}):null}},{key:"renderDivider",value:function(){var e=this.props,t=e.children,n=e.editTabs;return n&&n.length&&c.default.Children.count(t)?c.default.createElement(d.DropdownItem,{divider:!0,role:"separator"}):null}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.id,r=e.ActionMenuComponent,o=["element-editor-header__actions-toggle","btn","btn-sm","btn--no-text","font-icon-dot-3"];return c.default.createElement(r,{id:"element-editor-actions-"+n,className:"element-editor-header__actions-dropdown",dropdownMenuProps:{right:!0},dropdownToggleClassNames:o},this.renderEditTabs(),this.renderDivider(),t)}}]),t}(s.Component);b.propTypes={element:f.elementType,activeTab:s.PropTypes.string,editTabs:s.PropTypes.arrayOf(s.PropTypes.shape({title:s.PropTypes.string,name:s.PropTypes.string}))},b.defaultProps={editTabs:[]},t.Component=b,t.default=(0,u.compose)((0,p.inject)(["ActionMenu"],function(e){return{ActionMenuComponent:e}},function(){return"ElementEditor.ElementList.Element"}))(b)},"./client/src/components/ElementEditor/ElementDragPreview.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(0),c=r(s),u=n("./client/src/components/ElementEditor/Header.js"),d=r(u),p=n(8),f=n("./client/src/types/elementType.js"),m=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.isDragging,n=e.element,r=e.currentOffset;if(!t||!r)return null;var o=r.x,i=r.y,a="translate("+o+"px, "+i+"px)",l={transform:a,WebkitTransform:a};return c.default.createElement("div",{className:"element-editor-drag-preview",style:l},c.default.createElement(d.default,{element:n,simple:!0}))}}]),t}(s.Component);m.propTypes={element:f.elementType,isDragging:s.PropTypes.bool,currentOffset:s.PropTypes.shape({x:s.PropTypes.number.isRequired,y:s.PropTypes.number.isRequired})},t.default=(0,p.DragLayer)(function(e){return{element:e.getItem(),currentOffset:e.getSourceClientOffset(),isDragging:e.isDragging()}})(m)},"./client/src/components/ElementEditor/ElementEditor.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){var t=(0,h.loadElementFormStateName)("[0-9]+"),n=e.form.formState.element;return n?{formState:Object.keys(n).filter(function(e){return e.match(t)}).reduce(function(e,t){return c({},e,o({},t,n[t].values))},{})}:{}}Object.defineProperty(t,"__esModule",{value:!0}),t.Component=void 0;var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=n(0),p=r(d),f=n(1),m=n(3),y=n("./client/src/types/elementTypeType.js"),b=n(7),h=n("./client/src/state/editor/loadElementFormStateName.js"),g=n(8),v=n(4),E=r(v),T=n("./client/src/state/editor/sortBlockMutation.js"),_=r(T),O=n("./client/src/components/ElementEditor/ElementDragPreview.js"),P=r(O),j=n(20),I=r(j),w=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={dragTargetElementId:null,dragSpot:null},n.handleDragOver=n.handleDragOver.bind(n),n.handleDragEnd=n.handleDragEnd.bind(n),n}return l(t,e),u(t,[{key:"handleDragOver",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=!!e&&e.ID;this.setState({dragTargetElementId:n,dragSpot:!1===t?"bottom":"top"})}},{key:"handleDragEnd",value:function(e,t){var n=this.props;(0,n.actions.handleSortBlock)(e,t,n.pageId),this.setState({dragTargetElementId:null,dragSpot:null})}},{key:"render",value:function(){var e=this.props,t=e.fieldName,n=e.formState,r=e.ToolbarComponent,o=e.ListComponent,i=e.pageId,a=e.elementalAreaId,l=e.elementTypes,s=e.isDraggingOver,c=e.connectDropTarget,u=this.state,d=u.dragTargetElementId,f=u.dragSpot,m=(0,E.default)("element-editor",{});return c(p.default.createElement("div",{className:m},p.default.createElement(r,{elementTypes:l,elementalAreaId:a,onDragOver:this.handleDragOver}),p.default.createElement(o,{elementTypes:l,pageId:i,elementalAreaId:a,onDragOver:this.handleDragOver,onDragStart:this.handleDragStart,onDragEnd:this.handleDragEnd,dragSpot:f,isDraggingOver:s,dragTargetElementId:d}),p.default.createElement(P.default,null),p.default.createElement("input",{name:t,type:"hidden",value:JSON.stringify(n)||"",className:"no-change-track"})))}}]),t}(d.PureComponent);w.propTypes={fieldName:d.PropTypes.string,elementTypes:d.PropTypes.arrayOf(y.elementTypeType).isRequired,pageId:d.PropTypes.number.isRequired,elementalAreaId:d.PropTypes.number.isRequired,actions:d.PropTypes.shape({handleSortBlock:d.PropTypes.func})},w.defaultProps={},t.Component=w,t.default=(0,m.compose)(I.default,(0,g.DropTarget)("element",{},function(e,t){return{connectDropTarget:e.dropTarget(),isDraggingOver:t.isOver()}}),(0,b.connect)(s),(0,f.inject)(["ElementToolbar","ElementList"],function(e,t){return{ToolbarComponent:e,ListComponent:t}},function(){return"ElementEditor"}),_.default)(w)},"./client/src/components/ElementEditor/ElementList.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Component=void 0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),u=r(c),d=n("./client/src/types/elementType.js"),p=n("./client/src/types/elementTypeType.js"),f=n(3),m=n(1),y=n(4),b=r(y),h=n(2),g=r(h),v=n(8),E=n("./client/src/lib/dragHelpers.js"),T=n("./client/src/state/editor/elementConfig.js"),_=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"getDragIndicatorIndex",value:function(){var e=this.props,t=e.dragTargetElementId,n=e.draggedItem,r=e.blocks,o=e.dragSpot;return(0,E.getDragIndicatorIndex)(r.map(function(e){return e.ID}),t,n&&n.ID,o)}},{key:"renderBlocks",value:function(){var e=this.props,t=e.ElementComponent,n=e.HoverBarComponent,r=e.DragIndicatorComponent,o=e.blocks,i=e.elementTypes,a=e.elementalAreaId,l=e.onDragEnd,s=e.onDragOver,c=e.onDragStart,d=e.isDraggingOver;if(!o)return null;if(o&&!o.length)return u.default.createElement("div",null,g.default._t("ElementList.ADD_BLOCKS","Add blocks to place your content"));var p=o.map(function(e){return u.default.createElement("div",{key:e.ID},u.default.createElement(t,{element:e,type:(0,T.getElementTypeConfig)(e.BlockSchema.typeName,i),link:e.BlockSchema.actions.edit,onDragOver:s,onDragEnd:l,onDragStart:c}),d||u.default.createElement(n,{elementalAreaId:a,elementId:e.ID,elementTypes:i}))}),f=this.getDragIndicatorIndex();return d&&null!==f&&p.splice(f,0,u.default.createElement(r,{key:"DropIndicator"})),p}},{key:"renderLoading",value:function(){var e=this.props,t=e.loading,n=e.LoadingComponent;return t?u.default.createElement(n,null):null}},{key:"render",value:function(){var e=this.props.blocks,t=(0,b.default)("elemental-editor-list",{"elemental-editor-list--empty":!e||!e.length});return this.props.connectDropTarget(u.default.createElement("div",{className:t},this.renderLoading(),this.renderBlocks()))}}]),t}(c.Component);_.propTypes={blocks:c.PropTypes.arrayOf(d.elementType),elementTypes:c.PropTypes.arrayOf(p.elementTypeType).isRequired,loading:c.PropTypes.bool,elementalAreaId:c.PropTypes.number.isRequired,dragTargetElementId:c.PropTypes.oneOfType([c.PropTypes.string,c.PropTypes.bool]),onDragOver:c.PropTypes.func,onDragStart:c.PropTypes.func,onDragEnd:c.PropTypes.func},_.defaultProps={blocks:[],loading:!1},t.Component=_;var O={drop:function(e,t){var n=e.blocks,r=t.getDropResult();if(!r)return{};var o=(0,E.getDragIndicatorIndex)(n.map(function(e){return e.ID}),r.target,t.getItem(),r.dropSpot),i=n[o-1]?n[o-1].ID:"0";return l({},r,{dropAfterID:i})}};t.default=(0,f.compose)((0,v.DropTarget)("element",O,function(e,t){return{connectDropTarget:e.dropTarget(),draggedItem:t.getItem()}}),(0,m.inject)(["Element","Loading","HoverBar","DragPositionIndicator"],function(e,t,n,r){return{ElementComponent:e,LoadingComponent:t,HoverBarComponent:n,DragIndicatorComponent:r}},function(){return"ElementEditor.ElementList"}))(_)},"./client/src/components/ElementEditor/Header.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t){var n=(0,T.loadElementFormStateName)(t.element.ID);return{formDirty:(0,_.isDirty)("element."+n,P.default)(e)}}Object.defineProperty(t,"__esModule",{value:!0}),t.Component=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),u=r(c),d=n(9),p=n("./client/src/types/elementType.js"),f=n("./client/src/types/elementTypeType.js"),m=n(3),y=n(7),b=n(1),h=n(2),g=r(h),v=n(4),E=r(v),T=n("./client/src/state/editor/loadElementFormStateName.js"),_=n(11),O=n(14),P=r(O),j=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.toggle=n.toggle.bind(n),n.state={tooltipOpen:!1},n}return a(t,e),s(t,[{key:"componentDidUpdate",value:function(){var e=this.state.tooltipOpen,t=this.props.disableTooltip;e&&t&&this.setState({tooltipOpen:!1})}},{key:"toggle",value:function(){this.setState({tooltipOpen:!this.state.tooltipOpen})}},{key:"renderVersionedStateMessage",value:function(){var e=this.props,t=e.element,n=t.IsLiveVersion,r=t.IsPublished,o=e.formDirty;if(!o&&r&&n)return null;var i="",a=["element-editor-header__version-state"];return o?(i=g.default._t("ElementHeader.STATE_UNSAVED","Item has unsaved changes"),a.push("element-editor-header__version-state--unsaved")):r?n||(i=g.default._t("ElementHeader.STATE_MODIFIED","Item has unpublished changes"),a.push("element-editor-header__version-state--modified")):(i=g.default._t("ElementHeader.STATE_DRAFT","Item has not been published yet"),a.push("element-editor-header__version-state--draft")),u.default.createElement("span",{className:(0,E.default)(a),title:i})}},{key:"render",value:function(){var e=this.props,t=e.element,n=e.type,r=e.previewExpanded,o=e.simple,i=e.disableTooltip,a=e.activeTab,l=e.expandable,s=e.ElementActionsComponent,c=g.default.inject(g.default._t("ElementHeader.NOTITLE","Untitled {type} block"),{type:n.title}),p=(0,E.default)({"element-editor-header__title":!0,"element-editor-header__title--none":!t.Title}),f=g.default._t("ElementHeader.EXPAND","Show editable fields"),m=(0,E.default)("element-editor-header",{"element-editor-header--simple":o}),y=(0,E.default)("element-editor-header__expand",{"font-icon-right-open-big":!l,"font-icon-up-open-big":l&&r,"font-icon-down-open-big":l&&!r}),b="element-icon-"+t.ID;return u.default.createElement("div",{className:m},u.default.createElement("div",{className:"element-editor-header__drag-handle"},u.default.createElement("i",{className:"font-icon-drag-handle"})),u.default.createElement("div",{className:"element-editor-header__info"},u.default.createElement("div",{className:"element-editor-header__icon-container"},u.default.createElement("i",{className:n.icon,id:b}),this.renderVersionedStateMessage(),!o&&u.default.createElement(d.Tooltip,{placement:"top",isOpen:this.state.tooltipOpen&&!i,target:b,toggle:this.toggle},n.title)),u.default.createElement("h3",{className:p},t.Title||c)),!o&&u.default.createElement("div",{className:"element-editor-header__actions"},l&&u.default.createElement("div",{role:"none",onClick:function(e){return e.stopPropagation()}},u.default.createElement(s,{element:t,activeTab:a,editTabs:n.editTabs})),u.default.createElement("i",{className:y,title:f})))}}]),t}(c.Component);j.propTypes={element:p.elementType.isRequired,type:f.elementTypeType.isRequired,activeTab:c.PropTypes.string,simple:c.PropTypes.bool,ElementActionsComponent:u.default.PropTypes.oneOfType([u.default.PropTypes.node,u.default.PropTypes.func]),previewExpanded:c.PropTypes.bool,disableTooltip:c.PropTypes.bool,formDirty:c.PropTypes.bool},j.defaultProps={expandable:!0},t.Component=j,t.default=(0,m.compose)((0,b.inject)(["ElementActions"],function(e){return{ElementActionsComponent:e}},function(){return"ElementEditor.ElementList.Element"}),(0,y.connect)(l))(j)},"./client/src/components/ElementEditor/HoverBar.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Component=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(0),c=r(s),u=n(4),d=r(u),p=n(1),f=n("./client/src/types/elementTypeType.js"),m=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleMouseEnter=n.handleMouseEnter.bind(n),n.handleMouseLeave=n.handleMouseLeave.bind(n),n.renderHoverBar=n.renderHoverBar.bind(n),n.toggle=n.toggle.bind(n),n.state={timeoutRef:null,delayAreaActive:!1,instAreaActive:!1,popoverOpen:!1},n}return a(t,e),l(t,[{key:"handleMouseEnter",value:function(e){var t=this,n=this.props.elementId,r=window.document.getElementById("AddBlockArea_"+n),o=r.clientWidth,i=r.getBoundingClientRect().left;if(e.pageX-i<o-50){var a=setTimeout(function(){t.setState({delayAreaActive:!0})},200);this.setState({timeoutRef:a})}else this.setState({instAreaActive:!0})}},{key:"handleMouseLeave",value:function(){clearTimeout(this.state.timeoutRef),this.state.popoverOpen||this.setState({delayAreaActive:!1,instAreaActive:!1})}},{key:"toggle",value:function(){this.setState({popoverOpen:!this.state.popoverOpen})}},{key:"renderHoverBar",value:function(e){var t=this.props.elementId,n=(0,d.default)("font-icon-plus-circled","element-editor__add-block-hover-bar",{"element-editor__add-block-hover-bar--delay":!e,"element-editor__add-block-hover-bar--inst":e});return c.default.createElement("button",{id:"AddBlockHoverBar_"+t,className:n,onClick:this.toggle})}},{key:"render",value:function(){var e=this.props,t=e.AddElementPopoverComponent,n=e.elementTypes,r=e.elementId,o=e.elementalAreaId,i=this.state.popoverOpen;return c.default.createElement("div",{className:"element-editor__add-block-area-container",id:"AddBlockArea_"+r},c.default.createElement("div",{className:"element-editor__add-block-area",onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},this.state.delayAreaActive&&this.renderHoverBar(!1)||this.state.instAreaActive&&this.renderHoverBar(!0),(this.state.delayAreaActive||this.state.instAreaActive)&&c.default.createElement(t,{placement:"bottom-end",target:"AddBlockHoverBar_"+r,isOpen:i,elementTypes:n,toggle:this.toggle,container:"#AddBlockArea_"+r,elementalAreaId:o,insertAfterElement:r})))}}]),t}(s.Component);m.propTypes={elementTypes:s.PropTypes.arrayOf(f.elementTypeType).isRequired,elementId:s.PropTypes.oneOfType([s.PropTypes.string,s.PropTypes.number]).isRequired,elementalAreaId:s.PropTypes.oneOfType([s.PropTypes.number,s.PropTypes.string]).isRequired},t.Component=m,t.default=(0,p.inject)(["AddElementPopover"],function(e){return{AddElementPopoverComponent:e}},function(){return"ElementEditor.ElementList.HoverBar"})(m)},"./client/src/components/ElementEditor/InlineEditForm.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t){var n=(0,g.loadElementFormStateName)(t.elementId);return{formHasState:e.form.formState&&e.form.formState.element&&!!e.form.formState.element[n]}}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),u=r(c),d=n(4),p=r(d),f=n(16),m=r(f),y=n("./client/src/state/editor/loadElementSchemaValue.js"),b=n(2),h=r(b),g=n("./client/src/state/editor/loadElementFormStateName.js"),v=n(7),E=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleLoadingError=n.handleLoadingError.bind(n),n.state={loadingError:null},n}return a(t,e),s(t,[{key:"handleLoadingError",value:function(){var e=window,t=e.jQuery,n=this.props.handleLoadingError;this.setState({loadingError:!0}),t.noticeAdd({text:h.default.inject(h.default._t("ElementEditForm.ERROR_NOTIFICATION","Error displaying the edit form for this block")),stay:!0,type:"notice"}),n()}},{key:"render",value:function(){var e=this.props,t=e.elementId,n=e.extraClass,r=e.onClick,o=e.onFormInit,i=e.formHasState,a=this.state.loadingError,l=(0,p.default)("element-editor-editform",n),s=(0,y.loadElementSchemaValue)("schemaUrl",t),c={formTag:"div",schemaUrl:s,identifier:"element",refetchSchemaOnMount:!i,onLoadingError:this.handleLoadingError};return a&&(c.loading=!1),"function"==typeof o&&(c.onReduxFormInit=o),u.default.createElement("div",{className:l,onClick:r,role:"presentation"},u.default.createElement(m.default,c))}}]),t}(c.PureComponent);E.propTypes={extraClass:c.PropTypes.oneOfType([c.PropTypes.string,c.PropTypes.object]),onClick:c.PropTypes.func,elementId:c.PropTypes.string,handleLoadingError:c.PropTypes.func},t.default=(0,v.connect)(l)(E)},"./client/src/components/ElementEditor/Summary.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(0),c=r(s),u=n(2),d=r(u),p=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.fileUrl,n=e.fileTitle,r=e.content,o=d.default._t("ElementSummary.NO_PREVIEW","No preview available");return c.default.createElement("div",{className:"element-editor-summary"},t&&c.default.createElement("img",{className:"element-editor-summary__thumbnail-image",src:t,alt:n}),(r||!t)&&c.default.createElement("p",{className:"element-editor-summary__content"},r||o))}}]),t}(s.PureComponent);p.defaultProps={},p.propTypes={content:s.PropTypes.string,fileUrl:s.PropTypes.string,fileTitle:s.PropTypes.string},t.default=p},"./client/src/components/ElementEditor/Toolbar.js":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),s=function(e){return e&&e.__esModule?e:{default:e}}(l),c=n(1),u=n("./client/src/types/elementTypeType.js"),d=n(8),p=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),a(t,[{key:"render",value:function(){var e=this.props,t=e.AddNewButtonComponent,n=e.elementTypes,r=e.elementalAreaId;return(0,e.connectDropTarget)(s.default.createElement("div",{className:"element-editor__toolbar"},s.default.createElement(t,{elementTypes:n,elementalAreaId:r})))}}]),t}(l.PureComponent);p.defaultProps={},p.propTypes={elementTypes:l.PropTypes.arrayOf(u.elementTypeType).isRequired,elementalAreaId:l.PropTypes.number.isRequired,AddNewButtonComponent:l.PropTypes.oneOfType([l.PropTypes.node,l.PropTypes.func]).isRequired,connectDropTarget:l.PropTypes.func.isRequired,onDragOver:l.PropTypes.func,onDragDrop:l.PropTypes.func};var f={hover:function(e){var t=e.onDragOver;t&&t()}};t.default=(0,d.DropTarget)("element",f,function(e){return{connectDropTarget:e.dropTarget()}})((0,c.inject)(["ElementAddNewButton"],function(e){return{AddNewButtonComponent:e}},function(){return"ElementEditor.ElementToolbar"})(p))},"./client/src/components/HistoricElementView/HistoricElementView.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(r):void 0},c=n(0),u=r(c),d=n(2),p=r(d),f=n(4),m=r(f),y=function(e){return function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),l(t,[{key:"getClassName",value:function(){var e=[s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getClassName",this).call(this)];return this.props.data.ElementID&&e.unshift("elemental-area__element--historic-inner"),(0,m.default)(e)}},{key:"render",value:function(){var e=this.getLegend(),n=this.props.data.tag||"div",r=this.getClassName(),o=this.props.data;return o.ElementID?u.default.createElement(n,{className:r},e,u.default.createElement("div",{className:"elemental-preview elemental-preview--historic"},o.ElementEditLink&&u.default.createElement("a",{className:"elemental-preview__link",href:o.ElementEditLink},p.default._t("HistoricElementView.BLOCK_HISTORY","View block"),u.default.createElement("i",{className:"font-icon-angle-right"})),u.default.createElement("div",{className:"elemental-preview__icon"},u.default.createElement("i",{className:o.ElementIcon})),u.default.createElement("div",{className:"elemental-preview__detail"},u.default.createElement("h3",null,o.ElementTitle," ",u.default.createElement("small",null,o.ElementType)))),this.props.children):s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",this).call(this)}}]),t}(e)};t.default=y},"./client/src/components/TextCheckboxGroupField/TextCheckboxGroupField.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=r(o),a=n(9),l=n(15),s=r(l),c=function(e){var t=e.children,n=i.default.Children.toArray(i.default.Children.map(t,function(e){return i.default.cloneElement(e,{noHolder:!0})}));return 1===n.length?n[0]:i.default.createElement(a.InputGroup,{className:"text-checkout-group-field"},n[0],i.default.createElement(a.InputGroupAddon,{addonType:"append"},i.default.createElement(a.InputGroupText,null,n[1])))};t.default=(0,s.default)(c)},"./client/src/legacy/ElementEditor/entwine.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var i=n(19),a=r(i),l=n(0),s=r(l),c=n(13),u=r(c),d=n(1),p=n("./client/src/state/editor/elementConfig.js"),f=n(11);a.default.entwine("ss",function(e){e(".js-injector-boot .element-editor__container").entwine({onmatch:function(){var e={},t=(0,d.loadComponent)("ElementEditor",e),n=this.data("schema"),r=(0,p.getConfig)().elementTypes,o={fieldName:this.attr("name"),pageId:n["page-id"],elementalAreaId:n["elemental-area-id"],elementTypes:r};u.default.render(s.default.createElement(t,o),this[0])},onunmatch:function(){u.default.unmountComponentAtNode(this[0])},"from .cms-edit-form":{onaftersubmitform:function(){window.ss.apolloClient.resetStore(),setTimeout(function(){var e=window.ss.store;e&&e.dispatch(f.destroy.apply(void 0,o(Object.keys(e.getState().form.formState.element).map(function(e){return"element."+e}))))},0)}}}),e(".js-injector-boot .element-editor__container .element-form-dirty-state").entwine({onmatch:function(){e(".cms-edit-form").trigger("change")},onunmatch:function(){e(".cms-edit-form").trigger("change")}}),e(".cms-edit-form").entwine({getChangeTrackerOptions:function(){var t=void 0===this.entwineData("ChangeTrackerOptions"),n=this._super();return t&&(n=e.extend({},n),n.ignoreFieldSelector+=", .elementalarea :input:not(.element-form-dirty-state)",this.setChangeTrackerOptions(n)),n}})})},"./client/src/lib/dragHelpers.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDragIndicatorIndex=t.isOverTop=void 0;var r=n(13);t.isOverTop=function(e,t){var n=e.getClientOffset(),o=(0,r.findDOMNode)(t).getBoundingClientRect();return n.y<o.y+o.height/2},t.getDragIndicatorIndex=function(e,t,n,r){if(null===t||!n)return null;var o=t?e.findIndex(function(e){return e===t}):0,i=e.findIndex(function(e){return e===n});return"bottom"===r&&(o+=1),i===o||i+1===o?null:o}},"./client/src/state/editor/addElementMutation.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=t.mutation=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\nmutation AddElementToArea($className: String!, $elementalAreaID: ID!, $afterElementID: ID) {\n  addElementToArea(\n    ClassName: $className,\n    ElementalAreaID: $elementalAreaID,\n    AfterElementID: $afterElementID\n  ) {\n    ID\n  }\n}\n"],["\nmutation AddElementToArea($className: String!, $elementalAreaID: ID!, $afterElementID: ID) {\n  addElementToArea(\n    ClassName: $className,\n    ElementalAreaID: $elementalAreaID,\n    AfterElementID: $afterElementID\n  ) {\n    ID\n  }\n}\n"]),i=n(6),a=n(5),l=function(e){return e&&e.__esModule?e:{default:e}}(a),s=(0,l.default)(o),c={props:function(e){var t=e.mutate,n=e.ownProps.actions;return{actions:r({},n,{handleAddElementToArea:function(e,n,r){return t({variables:{className:e,elementalAreaID:n,afterElementID:r}})}})}},options:{refetchQueries:["ReadBlocksForPage"]}};t.mutation=s,t.config=c,t.default=(0,i.graphql)(s,c)},"./client/src/state/editor/archiveBlockMutation.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=t.mutation=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\nmutation ArchiveBlock($blockId: ID!) {\n  deleteBlock(IDs: [$blockId]) {\n    ID\n  }\n}\n"],["\nmutation ArchiveBlock($blockId: ID!) {\n  deleteBlock(IDs: [$blockId]) {\n    ID\n  }\n}\n"]),i=n(6),a=n(5),l=function(e){return e&&e.__esModule?e:{default:e}}(a),s=(0,l.default)(o),c={props:function(e){var t=e.mutate,n=e.ownProps.actions;return{actions:r({},n,{handleArchiveBlock:function(e){return t({variables:{blockId:e}})}})}},options:{refetchQueries:["ReadBlocksForPage"]}};t.mutation=s,t.config=c,t.default=(0,i.graphql)(s,c)},"./client/src/state/editor/elementConfig.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getElementTypeConfig=t.getConfig=void 0;var r=n(10),o=function(e){return e&&e.__esModule?e:{default:e}}(r),i=t.getConfig=function(){return o.default.getSection("DNADesign\\Elemental\\Controllers\\ElementalAreaController")};t.getElementTypeConfig=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(Array.isArray(t)?t:i().elementTypes).find(function(t){return t.class===e||t.name===e})}},"./client/src/state/editor/loadElementFormStateName.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadElementFormStateName=void 0;var r=n(10),o=function(e){return e&&e.__esModule?e:{default:e}}(r);t.loadElementFormStateName=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=o.default.getSection("DNADesign\\Elemental\\Controllers\\ElementalAreaController"),n=t.form.elementForm.formNameTemplate;return e?n.replace("{id}",e):n}},"./client/src/state/editor/loadElementSchemaValue.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadElementSchemaValue=void 0;var r=n(10),o=function(e){return e&&e.__esModule?e:{default:e}}(r);t.loadElementSchemaValue=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=o.default.getSection("DNADesign\\Elemental\\Controllers\\ElementalAreaController"),r=n.form.elementForm[e]||"";return t?r+"/"+t:r}},"./client/src/state/editor/publishBlockMutation.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=t.mutation=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\nmutation PublishBlock($blockId:ID!, $fromStage:VersionedStage!, $toStage:VersionedStage!, $fromVersion:Int!) {\n  copyBlockToStage(Input: {\n    ID: $blockId\n    FromVersion: $fromVersion\n    FromStage: $fromStage\n    ToStage: $toStage\n  }) {\n    ID\n  }\n}\n"],["\nmutation PublishBlock($blockId:ID!, $fromStage:VersionedStage!, $toStage:VersionedStage!, $fromVersion:Int!) {\n  copyBlockToStage(Input: {\n    ID: $blockId\n    FromVersion: $fromVersion\n    FromStage: $fromStage\n    ToStage: $toStage\n  }) {\n    ID\n  }\n}\n"]),i=n(6),a=n(5),l=function(e){return e&&e.__esModule?e:{default:e}}(a),s=(0,l.default)(o),c={props:function(e){var t=e.mutate,n=e.ownProps.actions;return{actions:r({},n,{handlePublishBlock:function(e,n,r,o){return t({variables:{blockId:e,fromStage:n,toStage:r,fromVersion:o}})}})}},options:{refetchQueries:["ReadBlocksForPage"]}};t.mutation=s,t.config=c,t.default=(0,i.graphql)(s,c)},"./client/src/state/editor/readBlocksForPageQuery.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=t.query=void 0;var r=function(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\nquery ReadBlocksForPage($id:ID!) {\n  readOnePage(ID: $id, Versioning: {\n    Mode: DRAFT\n  }){\n    ID\n    ElementalAreaIfExists {\n      Elements {\n        pageInfo {\n          totalCount\n        }\n        edges {\n          node {\n            ID\n            Title\n            BlockSchema\n            IsLiveVersion\n            IsPublished\n            Version\n          }\n        }\n      }\n    }\n  }\n}\n"],["\nquery ReadBlocksForPage($id:ID!) {\n  readOnePage(ID: $id, Versioning: {\n    Mode: DRAFT\n  }){\n    ID\n    ElementalAreaIfExists {\n      Elements {\n        pageInfo {\n          totalCount\n        }\n        edges {\n          node {\n            ID\n            Title\n            BlockSchema\n            IsLiveVersion\n            IsPublished\n            Version\n          }\n        }\n      }\n    }\n  }\n}\n"]),o=n(6),i=n(5),a=function(e){return e&&e.__esModule?e:{default:e}}(i),l=(0,a.default)(r),s={options:function(e){return{variables:{id:e.pageId}}},props:function(e){var t=e.data,n=t.error,r=t.readOnePage,o=t.loading,i=null;r&&(i=r.ElementalAreaIfExists.Elements.edges.map(function(e){return e.node}));var a=n&&n.graphQLErrors&&n.graphQLErrors.map(function(e){return e.message});return{loading:o||!i,blocks:i,graphQLErrors:a}}};t.query=l,t.config=s,t.default=(0,o.graphql)(l,s)},"./client/src/state/editor/sortBlockMutation.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=t.mutation=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\nmutation SortBlockMutation($blockId:ID!, $afterBlockId:ID!) {\n  sortBlock(\n    ID: $blockId\n    AfterBlockID: $afterBlockId\n  ) {\n    ID\n  }\n}\n"],["\nmutation SortBlockMutation($blockId:ID!, $afterBlockId:ID!) {\n  sortBlock(\n    ID: $blockId\n    AfterBlockID: $afterBlockId\n  ) {\n    ID\n  }\n}\n"]),i=n(6),a=n(5),l=function(e){return e&&e.__esModule?e:{default:e}}(a),s=n("./client/src/state/editor/readBlocksForPageQuery.js"),c=(0,l.default)(o),u={props:function(e){var t=e.mutate,n=e.ownProps.actions;return{actions:r({},n,{handleSortBlock:function(e,n,r){return t({variables:{blockId:e,afterBlockId:n},optimisticResponse:{sortBlock:{ID:e,__typename:"Block"}},update:function(t){var o=s.config.options({pageId:r}).variables,i=t.readQuery({query:s.query,variables:o}),a=JSON.parse(JSON.stringify(i)),l=a.readOnePage.ElementalAreaIfExists.Elements.edges,c=l.findIndex(function(t){return t.node.ID===e}),u=l[c];if(l.splice(c,1),n){var d=l.findIndex(function(e){return e.node.ID===n}),p=l.slice(d+1);l=l.slice(0,d+1),l.push(u),l=l.concat(p)}else l.unshift(u);a.readOnePage.ElementalAreaIfExists.Elements.edges=l,t.writeQuery({query:s.query,data:a,variables:o})}})}})}}};t.mutation=c,t.config=u,t.default=(0,i.graphql)(c,u)},"./client/src/state/editor/unpublishBlockMutation.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=t.mutation=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\nmutation UnpublishBlock($blockId:ID!) {\n  unpublishBlock(\n    ID: $blockId\n      ) {\n    ID\n  }\n}\n"],["\nmutation UnpublishBlock($blockId:ID!) {\n  unpublishBlock(\n    ID: $blockId\n      ) {\n    ID\n  }\n}\n"]),i=n(6),a=n(5),l=function(e){return e&&e.__esModule?e:{default:e}}(a),s=(0,l.default)(o),c={props:function(e){var t=e.mutate,n=e.ownProps.actions;return{actions:r({},n,{handleUnpublishBlock:function(e,n,r,o){return t({variables:{blockId:e,fromStage:n,toStage:r,fromVersion:o}})}})}},options:{refetchQueries:["ReadBlocksForPage"]}};t.mutation=s,t.config=c,t.default=(0,i.graphql)(s,c)},"./client/src/state/history/readOneBlockQuery.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=t.query=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\nquery ReadHistoryViewerBlock ($block_id: ID!, $limit: Int!, $offset: Int!) {\n  readOneBlock(\n    Versioning: {\n      Mode: LATEST\n    },\n    ID: $block_id\n  ) {\n    ID\n    Versions (limit: $limit, offset: $offset) {\n      pageInfo {\n        totalCount\n      }\n      edges {\n        node {\n          Version\n          AbsoluteLink\n          Author {\n            FirstName\n            Surname\n          }\n          Publisher {\n            FirstName\n            Surname\n          }\n          Published\n          LiveVersion\n          LatestDraftVersion\n          LastEdited\n        }\n      }\n    }\n  }\n}\n"],["\nquery ReadHistoryViewerBlock ($block_id: ID!, $limit: Int!, $offset: Int!) {\n  readOneBlock(\n    Versioning: {\n      Mode: LATEST\n    },\n    ID: $block_id\n  ) {\n    ID\n    Versions (limit: $limit, offset: $offset) {\n      pageInfo {\n        totalCount\n      }\n      edges {\n        node {\n          Version\n          AbsoluteLink\n          Author {\n            FirstName\n            Surname\n          }\n          Publisher {\n            FirstName\n            Surname\n          }\n          Published\n          LiveVersion\n          LatestDraftVersion\n          LastEdited\n        }\n      }\n    }\n  }\n}\n"]),i=n(6),a=n(5),l=function(e){return e&&e.__esModule?e:{default:e}}(a),s=(0,l.default)(o),c={options:function(e){var t=e.recordId,n=e.limit;return{variables:{limit:n,offset:((e.page||1)-1)*n,block_id:t}}},props:function(e){var t=e.data,n=t.error,o=t.refetch,i=t.readOneBlock,a=t.loading,l=e.ownProps,s=l.actions,c=void 0===s?{versions:{}}:s,u=l.limit,d=l.recordId,p=i||null,f=n&&n.graphQLErrors&&n.graphQLErrors.map(function(e){return e.message});return{loading:a||!p,versions:p,graphQLErrors:f,actions:r({},c,{versions:r({},p,{goToPage:function(e){o({offset:((e||1)-1)*u,limit:u,block_id:d})}})})}}};t.query=s,t.config=c,t.default=(0,i.graphql)(s,c)},"./client/src/state/history/revertToBlockVersionMutation.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=t.mutation=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\nmutation revertBlockToVersion($id:ID!, $fromStage:VersionedStage!, $toStage:VersionedStage!, $fromVersion:Int!) {\n  copyBlockToStage(Input: {\n    ID: $id\n    FromVersion: $fromVersion\n    FromStage: $fromStage\n    ToStage: $toStage\n  }) {\n    ID\n  }\n}\n"],["\nmutation revertBlockToVersion($id:ID!, $fromStage:VersionedStage!, $toStage:VersionedStage!, $fromVersion:Int!) {\n  copyBlockToStage(Input: {\n    ID: $id\n    FromVersion: $fromVersion\n    FromStage: $fromStage\n    ToStage: $toStage\n  }) {\n    ID\n  }\n}\n"]),i=n(6),a=n(5),l=function(e){return e&&e.__esModule?e:{default:e}}(a),s=(0,l.default)(o),c={props:function(e){var t=e.mutate,n=e.ownProps.actions;return{actions:r({},n,{revertToVersion:function(e,n,r,o){return t({variables:{id:e,fromVersion:n,fromStage:r,toStage:o}})}})}},options:{refetchQueries:["ReadHistoryViewerBlock"]}};t.mutation=s,t.config=c,t.default=(0,i.graphql)(s,c)},"./client/src/types/elementType.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.elementType=void 0;var r=n(0),o=r.PropTypes.shape({ID:r.PropTypes.string.isRequired,Title:r.PropTypes.string,BlockSchema:r.PropTypes.object,InlineEditable:r.PropTypes.bool,IsPublished:r.PropTypes.bool,IsLiveVersion:r.PropTypes.bool,Version:r.PropTypes.number});t.elementType=o},"./client/src/types/elementTypeType.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.elementTypeType=void 0;var r=n(0),o=r.PropTypes.shape({name:r.PropTypes.string,title:r.PropTypes.string,icon:r.PropTypes.string,inlineEditable:r.PropTypes.boolean,editTabs:r.PropTypes.arrayOf(r.PropTypes.shape({title:r.PropTypes.string,name:r.PropTypes.string})),config:r.PropTypes.object});t.elementTypeType=o},0:function(e,t){e.exports=React},1:function(e,t){e.exports=Injector},10:function(e,t){e.exports=Config},11:function(e,t){e.exports=ReduxForm},12:function(e,t){e.exports=Backend},13:function(e,t){e.exports=ReactDom},14:function(e,t){e.exports=getFormState},15:function(e,t){e.exports=FieldHolder},16:function(e,t){e.exports=FormBuilderLoader},17:function(e,t){e.exports=ReactDNDHtml5Backend},18:function(e,t){e.exports=TabsActions},19:function(e,t){e.exports=jQuery},2:function(e,t){e.exports=i18n},20:function(e,t){e.exports=withDragDropContext},3:function(e,t){e.exports=Redux},4:function(e,t){e.exports=classnames},5:function(e,t){e.exports=GraphQLTag},6:function(e,t){e.exports=ReactApollo},7:function(e,t){e.exports=ReactRedux},8:function(e,t){e.exports=ReactDND},9:function(e,t){e.exports=Reactstrap}});