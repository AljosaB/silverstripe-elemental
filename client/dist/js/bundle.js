!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=5)}([function(e,t){e.exports=GraphQLTag},function(e,t){e.exports=ReactApollo},function(e,t,n){"use strict";var r=n(4),o=function(e){return e&&e.__esModule?e:{default:e}}(r);window.document.addEventListener("DOMContentLoaded",function(){(0,o.default)()})},function(e,t,n){"use strict";var r=n(13);(function(e){return e&&e.__esModule?e:{default:e}})(r).default.entwine("ss",function(e){e(".cms-tabset-nav-primary .ui-tabs-anchor").entwine({toggleActionsBar:function(){var t=e(".cms-content-actions");"Root_History"===this.parent("li").attr("aria-controls")&&(e(".elemental-block__history").length>0||e(".history-viewer__container").length>0)?t.hide():t.show()},onmatch:function(){this._super(),this.parent("li").hasClass("ui-state-active")&&this.toggleActionsBar()},onclick:function(){this._super(),this.toggleActionsBar()}})})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(9),i=r(o),a=n(7),s=r(a),l=n(6),u=r(l),c=n(8),f=r(c);t.default=function(){i.default.transform("elemental-fieldgroup",function(e){e.component("FieldGroup.HistoryViewer.VersionDetail",u.default,"HistoricElement")},{after:"field-holders"}),i.default.transform("elements-history",function(e){e.component("HistoryViewer.Form_ItemEditForm",s.default,"ElementHistoryViewer")}),i.default.transform("blocks-history-revert",function(e){e.component("HistoryViewerToolbar.VersionedAdmin.HistoryViewer.Element.HistoryViewerVersionDetail",f.default,"BlockRevertMutation")})}},function(e,t,n){"use strict";n(3),n(2)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(r):void 0},u=n(10),c=r(u),f=n(12),d=r(f),p=n(11),m=r(p),g=function(e){return function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"getClassName",value:function(){var e=[l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getClassName",this).call(this)];return this.props.data.ElementID&&e.unshift("elemental-area__element--historic-inner"),(0,m.default)(e)}},{key:"render",value:function(){var e=this.getLegend(),n=this.props.data.tag||"div",r=this.getClassName(),o=this.props.data;return o.ElementID?c.default.createElement(n,{className:r},e,c.default.createElement("div",{className:"elemental-preview elemental-preview--historic"},o.ElementEditLink&&c.default.createElement("a",{className:"elemental-preview__link",href:o.ElementEditLink},d.default._t("HistoricElementView.BLOCK_HISTORY","View block"),c.default.createElement("i",{className:"font-icon-angle-right"})),c.default.createElement("div",{className:"elemental-preview__icon"},c.default.createElement("i",{className:o.ElementIcon})),c.default.createElement("div",{className:"elemental-preview__detail"},c.default.createElement("h3",null,o.ElementTitle," ",c.default.createElement("small",null,o.ElementType)))),this.props.children):l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",this).call(this)}}]),t}(e)};t.default=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=t.query=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\nquery ReadHistoryViewerBlock ($block_id: ID!, $limit: Int!, $offset: Int!) {\n  readOneBlock(\n    Versioning: {\n      Mode: LATEST\n    },\n    ID: $block_id\n  ) {\n    ID\n    Versions (limit: $limit, offset: $offset) {\n      pageInfo {\n        totalCount\n      }\n      edges {\n        node {\n          Version\n          AbsoluteLink\n          Author {\n            FirstName\n            Surname\n          }\n          Publisher {\n            FirstName\n            Surname\n          }\n          Published\n          LiveVersion\n          LastEdited\n        }\n      }\n    }\n  }\n}\n"],["\nquery ReadHistoryViewerBlock ($block_id: ID!, $limit: Int!, $offset: Int!) {\n  readOneBlock(\n    Versioning: {\n      Mode: LATEST\n    },\n    ID: $block_id\n  ) {\n    ID\n    Versions (limit: $limit, offset: $offset) {\n      pageInfo {\n        totalCount\n      }\n      edges {\n        node {\n          Version\n          AbsoluteLink\n          Author {\n            FirstName\n            Surname\n          }\n          Publisher {\n            FirstName\n            Surname\n          }\n          Published\n          LiveVersion\n          LastEdited\n        }\n      }\n    }\n  }\n}\n"]),i=n(1),a=n(0),s=function(e){return e&&e.__esModule?e:{default:e}}(a),l=(0,s.default)(o),u={options:function(e){var t=e.recordId,n=e.limit;return{variables:{limit:n,offset:((e.page||1)-1)*n,block_id:t}}},props:function(e){var t=e.data,n=t.error,o=t.refetch,i=t.readOneBlock,a=t.loading,s=e.ownProps,l=s.actions,u=void 0===l?{versions:{}}:l,c=s.limit,f=s.recordId,d=i||null,p=n&&n.graphQLErrors&&n.graphQLErrors.map(function(e){return e.message});return{loading:a||!d,versions:d,graphQLErrors:p,actions:r({},u,{versions:r({},d,{goToPage:function(e){o({offset:((e||1)-1)*c,limit:c,block_id:f})}})})}}};t.query=l,t.config=u,t.default=(0,i.graphql)(l,u)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=t.mutation=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\nmutation revertBlockToVersion($id:ID!, $fromStage:VersionedStage!, $toStage:VersionedStage!, $fromVersion:Int!) {\n  copyBlockToStage(Input: {\n    ID: $id\n    FromVersion: $fromVersion\n    FromStage: $fromStage\n    ToStage: $toStage\n  }) {\n    ID\n  }\n}\n"],["\nmutation revertBlockToVersion($id:ID!, $fromStage:VersionedStage!, $toStage:VersionedStage!, $fromVersion:Int!) {\n  copyBlockToStage(Input: {\n    ID: $id\n    FromVersion: $fromVersion\n    FromStage: $fromStage\n    ToStage: $toStage\n  }) {\n    ID\n  }\n}\n"]),i=n(1),a=n(0),s=function(e){return e&&e.__esModule?e:{default:e}}(a),l=(0,s.default)(o),u={props:function(e){var t=e.mutate,n=e.ownProps.actions;return{actions:r({},n,{revertToVersion:function(e,n,r,o){return t({variables:{id:e,fromVersion:n,fromStage:r,toStage:o}})}})}},options:{refetchQueries:["ReadHistoryViewerBlock"]}};t.mutation=l,t.config=u,t.default=(0,i.graphql)(l,u)},function(e,t){e.exports=Injector},function(e,t){e.exports=React},function(e,t){e.exports=classnames},function(e,t){e.exports=i18n},function(e,t){e.exports=jQuery}]);